{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { CdkDropList, CdkDrag, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { NgFor } from '@angular/common';\nlet ExpandgroupComponent = class ExpandgroupComponent {\n  changetocollapse() {\n    this.collapseeChange.emit(true);\n  }\n  drop(event) {\n    moveItemInArray(this.task_list, event.previousIndex, event.currentIndex);\n  }\n  // ngOnInit(): void {\n  //   this.getTaskList();\n  // }\n  // constructor(private task_service: TaskService) {}\n  getTaskList() {\n    this.task_service.getTaskList().subscribe(data => {\n      this.task_list = data;\n    });\n  }\n  deleteTask(delete_task) {\n    if (confirm(`Are you sure to delete this task ${delete_task.name}?`)) {\n      this.task_service.deleteTask(delete_task.id).subscribe({\n        error: () => this.reloadList()\n      });\n    }\n  }\n  reloadList() {\n    this.getTaskList();\n  }\n  constructor(fb, route, router, task_service) {\n    this.fb = fb;\n    this.route = route;\n    this.router = router;\n    this.task_service = task_service;\n    this.collapsee = false;\n    this.collapseeChange = new EventEmitter();\n    this.task_list = [];\n    this.mess = \"\";\n  }\n  ngOnInit() {\n    this.task_form = this.fb.group({\n      id: '',\n      name: '',\n      parent_task: '',\n      child_task: [],\n      create_by: '',\n      create_date: '',\n      status: ''\n    });\n    this.sub = this.route.paramMap.subscribe(param => {\n      const id = param.get('id');\n      if (id == '0') {\n        const task = {\n          id: \"\",\n          name: \"\",\n          parent_task: \"\",\n          child_task: [],\n          create_by: \"\",\n          create_date: \"\",\n          status: \"\"\n        };\n        this.displayTask(task);\n      } else {\n        this.getTask(id);\n      }\n    });\n  }\n  displayTask(task) {\n    if (this.task_form) {\n      this.task_form.reset();\n    }\n    this.task = task;\n    this.task_form.patchValue({\n      id: this.task.id,\n      name: this.task.name,\n      parent_task: this.task.parent_task,\n      child_task: this.task.child_task,\n      create_by: this.task.create_by,\n      create_date: this.task.create_date,\n      status: this.task.status\n    });\n  }\n  getTask(id) {\n    this.task_service.getOneTask(id).subscribe({\n      next: task => this.displayTask(task)\n    });\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  saveTask() {\n    if (this.task_form.valid) {\n      if (this.task_form.dirty) {\n        const t = {\n          ...this.task,\n          ...this.task_form.value\n        };\n        if (t.id === '0') {\n          this.task_service.createTask(t).subscribe({\n            error: () => this.mess = \"Thêm mới thành công\"\n          });\n        } else {\n          this.task_service.updateTask(t).subscribe({\n            error: () => this.mess = \"Chỉnh sửa thành công\"\n          });\n        }\n      } else {\n        this.onSaveComplete();\n      }\n    } else {\n      console.log(\"Task form bị lỗi: dòng 94\");\n    }\n  }\n  onSaveComplete() {\n    this.task_form.reset();\n    this.router.navigate(['/task']);\n  }\n};\n__decorate([Input()], ExpandgroupComponent.prototype, \"collapsee\", void 0);\n__decorate([Output()], ExpandgroupComponent.prototype, \"collapseeChange\", void 0);\nExpandgroupComponent = __decorate([Component({\n  selector: 'app-expandgroup',\n  templateUrl: './expandgroup.component.html',\n  styleUrls: ['./expandgroup.component.css'],\n  standalone: true,\n  imports: [CdkDropList, NgFor, CdkDrag]\n})], ExpandgroupComponent);\nexport { ExpandgroupComponent };\nfunction output() {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"mappings":"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","names":["Component","EventEmitter","Input","Output","CdkDropList","CdkDrag","moveItemInArray","NgFor","ExpandgroupComponent","changetocollapse","collapseeChange","emit","drop","event","task_list","previousIndex","currentIndex","getTaskList","task_service","subscribe","data","deleteTask","delete_task","confirm","name","id","error","reloadList","constructor","fb","route","router","ngOnInit","task_form","group","parent_task","child_task","create_by","create_date","status","sub","paramMap","param","get","task","displayTask","getTask","reset","patchValue","getOneTask","next","ngOnDestroy","unsubscribe","saveTask","valid","dirty","t","value","createTask","mess","updateTask","onSaveComplete","console","log","navigate","__decorate","selector","templateUrl","styleUrls","standalone","imports","output","Error"],"sourceRoot":"","sources":["E:\\.NetCoreApp\\MondayApp\\ClientApp\\src\\app\\group\\expandgroup\\expandgroup.component.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output,  } from '@angular/core';\r\nimport {CdkDragDrop, CdkDropList, CdkDrag, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {NgFor} from '@angular/common';\r\nimport { Task } from 'src/app/task';\r\nimport { TaskService } from 'src/app/task.service';\r\n\r\n@Component({\r\n  selector: 'app-expandgroup',\r\n  templateUrl: './expandgroup.component.html',\r\n  styleUrls: ['./expandgroup.component.css'],\r\n  standalone: true,\r\n  imports: [CdkDropList, NgFor, CdkDrag],\r\n})\r\nexport class ExpandgroupComponent implements OnInit {\r\n  @Input() collapsee: boolean = false;\r\n  @Output() collapseeChange = new EventEmitter<boolean>();\r\n  task_list: Task[] = [];\r\n\r\n  changetocollapse() {\r\n    this.collapseeChange.emit(true);\r\n  }\r\n\r\n  drop(event: CdkDragDrop<string[]>) {\r\n    moveItemInArray(this.task_list, event.previousIndex, event.currentIndex);\r\n  }\r\n\r\n  // ngOnInit(): void {\r\n  //   this.getTaskList();\r\n  // }\r\n\r\n  // constructor(private task_service: TaskService) {}\r\n\r\n  getTaskList(): void {\r\n    this.task_service.getTaskList().subscribe( data =>{\r\n      this.task_list = data;\r\n    })\r\n  }\r\n\r\n  deleteTask(delete_task: Task): void {\r\n    if(confirm(`Are you sure to delete this task ${delete_task.name}?`)) {\r\n      this.task_service.deleteTask(delete_task.id).subscribe({\r\n        error: () =>this.reloadList()\r\n      })\r\n    }\r\n  }\r\n\r\n  reloadList(): void {\r\n    this.getTaskList();\r\n  }\r\n\r\n  task_form!: FormGroup;\r\n  task!: Task;\r\n  private sub!: Subscription;\r\n  mess: string = \"\";\r\n\r\n  constructor(private fb: FormBuilder, private route: ActivatedRoute, private router: Router, private task_service: TaskService) {}\r\n\r\n  ngOnInit(): void {\r\n      this.task_form = this.fb.group({\r\n        id: '',\r\n        name: '',\r\n        parent_task: '',\r\n        child_task: [],\r\n        create_by: '',\r\n        create_date: '',\r\n        status: '',\r\n      });\r\n\r\n      this.sub = this.route.paramMap.subscribe(param => {\r\n        const id = param.get('id');\r\n        if(id == '0') {\r\n          const task: Task = {id: \"\", name: \"\", parent_task: \"\", child_task: [], create_by: \"\", create_date: \"\", status: \"\",};\r\n          this.displayTask(task);\r\n        }\r\n        else {\r\n          this.getTask(id);\r\n        }\r\n      });\r\n  }\r\n\r\n  displayTask(task: Task): void {\r\n    if (this.task_form) {\r\n      this.task_form.reset();\r\n    }\r\n\r\n    this.task = task;\r\n\r\n    this.task_form.patchValue({\r\n      id: this.task.id,\r\n      name: this.task.name,\r\n      parent_task: this.task.parent_task,\r\n      child_task: this.task.child_task,\r\n      create_by: this.task.create_by,\r\n      create_date: this.task.create_date,\r\n      status: this.task.status,\r\n    });\r\n  }\r\n\r\n  getTask(id: string | null): void {\r\n    this.task_service.getOneTask(id).subscribe({\r\n      next: (task: Task) => this.displayTask(task)\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n      this.sub.unsubscribe();\r\n  } \r\n\r\n  saveTask(): void {\r\n    if(this.task_form.valid) {\r\n      if(this.task_form.dirty) {\r\n        const t: Task = {...this.task, ...this.task_form.value};\r\n        if(t.id === '0') {\r\n          this.task_service.createTask(t).subscribe({\r\n            error: () => this.mess=\"Thêm mới thành công\"\r\n          });\r\n        }\r\n        else {\r\n          this.task_service.updateTask(t).subscribe({\r\n            error: () => this.mess=\"Chỉnh sửa thành công\"\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        this.onSaveComplete();\r\n      }\r\n    }\r\n    else {\r\n      console.log(\"Task form bị lỗi: dòng 94\");\r\n    }\r\n  }\r\n\r\n  onSaveComplete(): void {\r\n    this.task_form.reset();\r\n    this.router.navigate(['/task'])\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\nfunction output() {\r\n  throw new Error('Function not implemented.');\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}