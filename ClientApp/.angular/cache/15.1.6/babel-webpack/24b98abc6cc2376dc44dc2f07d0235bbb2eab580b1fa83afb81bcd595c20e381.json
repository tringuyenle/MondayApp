{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../group-task-service/group-task.service\";\nimport * as i2 from \"../task-service/task.service\";\nimport * as i3 from \"../sub-task-service/sub-task.service\";\nexport class GroupTaskListService {\n  constructor(group_task_service, task_service, sub_task_service) {\n    this.group_task_service = group_task_service;\n    this.task_service = task_service;\n    this.sub_task_service = sub_task_service;\n    this.group_task_list = [];\n    this.delete_task_list = [];\n    this.is_load_delete_list = false;\n  }\n  getGroupTaskList() {\n    this.group_task_service.getGroupTaskList().subscribe(data => {\n      this.group_task_list = data;\n      this.first_group = data[0];\n    });\n  }\n  reloadList() {\n    this.getGroupTaskList();\n  }\n  deleteGroupTask(group_task) {\n    if (confirm(`Are you sure to delete Group Task: ${group_task.name}`)) {\n      // this.task_service.deleteTask(group_task.id, false).subscribe({\n      //   error: () => console.log(\"Delete all task!\")\n      // });\n      // this.task_service.getTaskList().subscribe(data => {\n      //   console.log('1');\n      //   this.delete_task_list = data;\n      //   this.is_load_delete_list = true;\n      //   // console.log(this.delete_task_list);\n      //   // for(var delete_task of this.delete_task_list) {\n      //   //   if(delete_task.parent_task === group_task.id) {\n      //   //     this.task_service.deleteTask(delete_task.id, true);\n      //   //   }\n      //   // }\n      // });\n      // console.log('2');\n      // if(this.is_load_delete_list) {\n      //   console.log(this.delete_task_list);\n      // }\n      function loadData() {\n        return new Promise((resolve, reject) => {\n          this.task_service.getTaskList().subscribe(data => {\n            console.log('1');\n            this.delete_task_list = data;\n            this.is_load_delete_list = true;\n            resolve(); // Gọi resolve() khi dữ liệu đã được gán và biến đã được đặt\n            // Các lệnh xử lý dữ liệu khác trong hàm subscribe\n          });\n        });\n      }\n\n      loadData().then(() => {\n        console.log('2');\n        if (this.is_load_delete_list) {\n          console.log(this.delete_task_list);\n        }\n      });\n      this.group_task_service.deleteGroupTask(group_task.id).subscribe({\n        error: () => {\n          // console.log(\"Delete group task\");\n          this.reloadList();\n        }\n      });\n    }\n  }\n}\nGroupTaskListService.ɵfac = function GroupTaskListService_Factory(t) {\n  return new (t || GroupTaskListService)(i0.ɵɵinject(i1.GroupTaskService), i0.ɵɵinject(i2.TaskService), i0.ɵɵinject(i3.SubTaskService));\n};\nGroupTaskListService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: GroupTaskListService,\n  factory: GroupTaskListService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";;;;AAUA,OAAM,MAAOA,oBAAoB;EAO/BC,YAAoBC,kBAAoC,EAAUC,YAAyB,EACvEC,gBAAgC;IADhC,uBAAkB,GAAlBF,kBAAkB;IAA4B,iBAAY,GAAZC,YAAY;IAC1D,qBAAgB,GAAhBC,gBAAgB;IANpC,oBAAe,GAAgB,EAAE;IACjC,qBAAgB,GAAW,EAAE;IAC7B,wBAAmB,GAAW,KAAK;EAIqB;EAExDC,gBAAgB;IACd,IAAI,CAACH,kBAAkB,CAACG,gBAAgB,EAAE,CAACC,SAAS,CAACC,IAAI,IAAG;MAC1D,IAAI,CAACC,eAAe,GAAGD,IAAI;MAC3B,IAAI,CAACE,WAAW,GAAGF,IAAI,CAAC,CAAC,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEAG,UAAU;IACR,IAAI,CAACL,gBAAgB,EAAE;EACzB;EAEAM,eAAe,CAACC,UAAqB;IACnC,IAAGC,OAAO,CAAC,sCAAsCD,UAAU,CAACE,IAAI,EAAE,CAAC,EAAE;MACnE;MACA;MACA;MAEA;MACA;MACA;MACA;MAEA;MAEA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;MACA;MAEA,SAASC,QAAQ;QACf,OAAO,IAAIC,OAAO,CAAO,CAACC,OAAO,EAAEC,MAAM,KAAI;UAC3C,IAAI,CAACf,YAAY,CAACgB,WAAW,EAAE,CAACb,SAAS,CAACC,IAAI,IAAG;YAC/Ca,OAAO,CAACC,GAAG,CAAC,GAAG,CAAC;YAChB,IAAI,CAACC,gBAAgB,GAAGf,IAAI;YAC5B,IAAI,CAACgB,mBAAmB,GAAG,IAAI;YAC/BN,OAAO,EAAE,CAAC,CAAC;YAEX;UACF,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ;;MAEAF,QAAQ,EAAE,CAACS,IAAI,CAAC,MAAK;QACnBJ,OAAO,CAACC,GAAG,CAAC,GAAG,CAAC;QAChB,IAAI,IAAI,CAACE,mBAAmB,EAAE;UAC5BH,OAAO,CAACC,GAAG,CAAC,IAAI,CAACC,gBAAgB,CAAC;;MAEtC,CAAC,CAAC;MAGF,IAAI,CAACpB,kBAAkB,CAACS,eAAe,CAACC,UAAU,CAACa,EAAE,CAAC,CAACnB,SAAS,CAAC;QAC/DoB,KAAK,EAAE,MAAK;UACV;UACA,IAAI,CAAChB,UAAU,EAAE;QACnB;OACD,CAAC;;EAEN;;AA1EWV,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;SAApBA,oBAAoB;EAAA2B,SAApB3B,oBAAoB;EAAA4B,YAFnB;AAAM","names":["GroupTaskListService","constructor","group_task_service","task_service","sub_task_service","getGroupTaskList","subscribe","data","group_task_list","first_group","reloadList","deleteGroupTask","group_task","confirm","name","loadData","Promise","resolve","reject","getTaskList","console","log","delete_task_list","is_load_delete_list","then","id","error","factory","providedIn"],"sourceRoot":"","sources":["E:\\.NetCoreApp\\MondayApp\\ClientApp\\src\\services\\group-task-list-service\\group-task-list.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Grouptask } from 'src/app/grouptask';\r\nimport { GroupTaskService } from '../group-task-service/group-task.service';\r\nimport { TaskService } from '../task-service/task.service';\r\nimport { Task } from 'src/app/task';\r\nimport { SubTaskService } from '../sub-task-service/sub-task.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GroupTaskListService {\r\n\r\n  group_task_list: Grouptask[] = [];\r\n  delete_task_list: Task[] = [];\r\n  is_load_delete_list: boolean= false;\r\n  first_group!: Grouptask;\r\n\r\n  constructor(private group_task_service: GroupTaskService, private task_service: TaskService,\r\n              private sub_task_service: SubTaskService) { }\r\n\r\n  getGroupTaskList() {\r\n    this.group_task_service.getGroupTaskList().subscribe(data => {\r\n      this.group_task_list = data;\r\n      this.first_group = data[0];\r\n    });\r\n  }\r\n\r\n  reloadList() {\r\n    this.getGroupTaskList();\r\n  }\r\n\r\n  deleteGroupTask(group_task: Grouptask) {\r\n    if(confirm(`Are you sure to delete Group Task: ${group_task.name}`)) {\r\n      // this.task_service.deleteTask(group_task.id, false).subscribe({\r\n      //   error: () => console.log(\"Delete all task!\")\r\n      // });\r\n\r\n      // this.task_service.getTaskList().subscribe(data => {\r\n      //   console.log('1');\r\n      //   this.delete_task_list = data;\r\n      //   this.is_load_delete_list = true;\r\n\r\n      //   // console.log(this.delete_task_list);\r\n\r\n      //   // for(var delete_task of this.delete_task_list) {\r\n      //   //   if(delete_task.parent_task === group_task.id) {\r\n      //   //     this.task_service.deleteTask(delete_task.id, true);\r\n      //   //   }\r\n      //   // }\r\n      // });\r\n\r\n      // console.log('2');\r\n      // if(this.is_load_delete_list) {\r\n      //   console.log(this.delete_task_list);\r\n      // }\r\n\r\n      function loadData(): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n          this.task_service.getTaskList().subscribe(data => {\r\n            console.log('1');\r\n            this.delete_task_list = data;\r\n            this.is_load_delete_list = true;\r\n            resolve(); // Gọi resolve() khi dữ liệu đã được gán và biến đã được đặt\r\n      \r\n            // Các lệnh xử lý dữ liệu khác trong hàm subscribe\r\n          });\r\n        });\r\n      }\r\n      \r\n      loadData().then(() => {\r\n        console.log('2');\r\n        if (this.is_load_delete_list) {\r\n          console.log(this.delete_task_list);\r\n        }\r\n      });\r\n      \r\n\r\n      this.group_task_service.deleteGroupTask(group_task.id).subscribe({\r\n        error: () => {\r\n          // console.log(\"Delete group task\");\r\n          this.reloadList();\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}