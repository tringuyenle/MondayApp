{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { CdkDropList, CdkDrag, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { NgFor } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/task.service\";\nfunction ExpandgroupComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"div\", 22)(2, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ExpandgroupComponent_div_36_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const task_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteTask(task_r1));\n    });\n    i0.ɵɵelementStart(3, \"div\", 3);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(4, \"svg\", 4);\n    i0.ɵɵelement(5, \"path\", 5);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"div\", 14)(7, \"div\", 28)(8, \"div\", 8)(9, \"div\", 16);\n    i0.ɵɵelement(10, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 24)(12, \"span\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 19)(15, \"span\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 19)(18, \"span\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 19)(21, \"span\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const task_r1 = ctx.$implicit;\n    i0.ɵɵadvance(13);\n    i0.ɵɵtextInterpolate1(\" \", task_r1.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", task_r1.create_by, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", task_r1.status, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", task_r1.create_date, \" \");\n  }\n}\nexport class ExpandgroupComponent {\n  changetocollapse() {\n    this.collapseeChange.emit(true);\n  }\n  drop(event) {\n    moveItemInArray(this.task_list, event.previousIndex, event.currentIndex);\n  }\n  // ngOnInit(): void {\n  //   this.getTaskList();\n  // }\n  ngOnInit() {\n    this.getTaskList();\n    this.task_form = this.fb.group({\n      id: '',\n      name: '',\n      parent_task: '',\n      child_task: [],\n      create_by: '',\n      create_date: '',\n      status: ''\n    });\n    this.sub = this.route.paramMap.subscribe(param => {\n      const id = param.get('id');\n      if (id == '0') {\n        const task = {\n          id: \"0\",\n          name: \"\",\n          parent_task: \"\",\n          child_task: [],\n          create_by: \"\",\n          create_date: \"\",\n          status: \"\"\n        };\n        this.displayTask(task);\n      } else {\n        this.getTask(id);\n      }\n    });\n  }\n  // constructor(private task_service: TaskService) {}\n  constructor(fb, route, task_service) {\n    this.fb = fb;\n    this.route = route;\n    this.task_service = task_service;\n    this.collapsee = false;\n    this.collapseeChange = new EventEmitter();\n    this.task_list = [];\n    this.mess = \"\";\n  }\n  getTaskList() {\n    this.task_service.getTaskList().subscribe(data => {\n      this.task_list = data;\n    });\n  }\n  deleteTask(delete_task) {\n    if (confirm(`Are you sure to delete this task ${delete_task.name}?`)) {\n      this.task_service.deleteTask(delete_task.id).subscribe({\n        error: () => this.reloadList()\n      });\n    }\n  }\n  reloadList() {\n    this.getTaskList();\n  }\n  displayTask(task) {\n    if (this.task_form) {\n      this.task_form.reset();\n    }\n    this.task = task;\n    this.task_form.patchValue({\n      id: this.task.id,\n      name: this.task.name,\n      parent_task: this.task.parent_task,\n      child_task: this.task.child_task,\n      create_by: this.task.create_by,\n      create_date: this.task.create_date,\n      status: this.task.status\n    });\n  }\n  getTask(id) {\n    this.task_service.getOneTask(id).subscribe({\n      next: task => this.displayTask(task)\n    });\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  saveTask() {\n    if (this.task_form.valid) {\n      if (this.task_form.dirty) {\n        const t = {\n          ...this.task,\n          ...this.task_form.value\n        };\n        if (t.id === '0') {\n          this.task_service.createTask(t).subscribe({\n            error: () => this.mess = \"Thêm mới thành công\"\n          });\n        } else {\n          this.task_service.updateTask(t).subscribe({\n            error: () => this.mess = \"Chỉnh sửa thành công\"\n          });\n        }\n      } else {\n        this.onSaveComplete();\n      }\n    } else {\n      console.log(\"Task form bị lỗi: dòng 94\");\n    }\n  }\n  onSaveComplete() {\n    this.task_form.reset();\n    // this.router.navigate(['/task'])\n  }\n}\n\nExpandgroupComponent.ɵfac = function ExpandgroupComponent_Factory(t) {\n  return new (t || ExpandgroupComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.TaskService));\n};\nExpandgroupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ExpandgroupComponent,\n  selectors: [[\"app-expandgroup\"]],\n  inputs: {\n    collapsee: \"collapsee\"\n  },\n  outputs: {\n    collapseeChange: \"collapseeChange\"\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 51,\n  vars: 1,\n  consts: [[1, \"group\"], [1, \"mt-2\", \"pl-2\", \"h-14\", \"absolute\", \"left-px\"], [1, \"p-1\", \"hover:bg-slate-300\", \"rounded-md\"], [1, \"group-hover:fill-currentColor\"], [\"viewBox\", \"0 0 20 20\", \"fill\", \"currentColor\", \"width\", \"20\", \"height\", \"20\", \"aria-hidden\", \"true\", \"data-testid\", \"icon\", 1, \"icon_4b23d45e02\", \"noFocusStyle_cff5f5a050\"], [\"d\", \"M6 10.5C6 11.3284 5.32843 12 4.5 12 3.67157 12 3 11.3284 3 10.5 3 9.67157 3.67157 9 4.5 9 5.32843 9 6 9.67157 6 10.5zM11.8333 10.5C11.8333 11.3284 11.1618 12 10.3333 12 9.50492 12 8.83334 11.3284 8.83334 10.5 8.83334 9.67157 9.50492 9 10.3333 9 11.1618 9 11.8333 9.67157 11.8333 10.5zM17.6667 10.5C17.6667 11.3284 16.9951 12 16.1667 12 15.3383 12 14.6667 11.3284 14.6667 10.5 14.6667 9.67157 15.3383 9 16.1667 9 16.9951 9 17.6667 9.67157 17.6667 10.5z\", \"fill\", \"white\", 1, \"group-hover:fill-black\"], [1, \"flex\", \"flex-col\", \"p-1\", \"ml-1\", \"pb-0\"], [1, \"flex\", \"flex-col\", \"border-solid\", \"py-1\"], [1, \"flex\", \"items-center\"], [3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 448 512\", 1, \"ml-2\", \"mr-1\"], [\"d\", \"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\", 1, \"fill-blue-500\"], [1, \"py-1\", \"ml-2\", \"text-xl\", \"text-blue-500\", \"font-medium\"], [1, \"ml-5\", \"text-black\", \"group-hover:visible\"], [1, \"flex\", \"flex-col\", \"p-1\", \"py-0\"], [1, \"flex\", \"flex-col\", \"border-solid\", \"py-0\", \"border-l-blue-500\", \"border-gray-200\", \"border-t-2\", \"border-l-8\", \"rounded-tl-md\"], [1, \"p-2\", \"border-r-2\", \"border-solid\", \"border-gray-200\"], [\"type\", \"checkbox\", 1, \"border-gray-200\"], [1, \"w-1/3\", \"flex\", \"justify-center\", \"p-2\", \"border-r-2\", \"border-solid\", \"border-gray-200\"], [1, \"w-40\", \"flex\", \"justify-center\", \"p-2\", \"border-r-2\", \"border-solid\", \"border-gray-200\"], [\"cdkDropList\", \"\", 3, \"cdkDropListDropped\"], [\"class\", \"group\", \"cdkDrag\", \"\", 4, \"ngFor\", \"ngForOf\"], [1, \"pl-2\", \"h-14\", \"absolute\", \"left-px\"], [1, \"flex\", \"flex-col\", \"border-solid\", \"border-l-blue-200\", \"group-hover:border-l-blue-500\", \"border-gray-200\", \"border-2\", \"border-l-8\", \"rounded-bl-md\"], [1, \"w-1/3\", \"flex\", \"pl-8\", \"py-2\", \"border-r-2\", \"border-solid\", \"border-gray-200\"], [1, \"border-solid\", \"border-2\", \"border-white\", \"group-hover:border-gray-300\"], [\"cdkDrag\", \"\", 1, \"group\"], [1, \"p-1\", \"hover:bg-slate-300\", \"rounded-md\", 3, \"click\"], [1, \"flex\", \"flex-col\", \"border-solid\", \"border-l-blue-500\", \"border-gray-200\", \"border-t-2\", \"border-l-8\"]],\n  template: function ExpandgroupComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2)(3, \"div\", 3);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(4, \"svg\", 4);\n      i0.ɵɵelement(5, \"path\", 5);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(6, \"div\")(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8)(10, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function ExpandgroupComponent_Template_button_click_10_listener() {\n        return ctx.changetocollapse();\n      });\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(11, \"svg\", 10);\n      i0.ɵɵelement(12, \"path\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(13, \"span\", 12);\n      i0.ɵɵtext(14, \" Group Title \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"span\", 13);\n      i0.ɵɵtext(16, \"4 Tasks / 1 Subitem\");\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelementStart(17, \"div\")(18, \"div\", 14)(19, \"div\", 15)(20, \"div\", 8)(21, \"div\", 16);\n      i0.ɵɵelement(22, \"input\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 18)(24, \"span\");\n      i0.ɵɵtext(25, \" Task \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 19)(27, \"span\");\n      i0.ɵɵtext(28, \" Person \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 19)(30, \"span\");\n      i0.ɵɵtext(31, \" Status \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 19)(33, \"span\");\n      i0.ɵɵtext(34, \" Date \");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(35, \"div\", 20);\n      i0.ɵɵlistener(\"cdkDropListDropped\", function ExpandgroupComponent_Template_div_cdkDropListDropped_35_listener($event) {\n        return ctx.drop($event);\n      });\n      i0.ɵɵtemplate(36, ExpandgroupComponent_div_36_Template, 23, 4, \"div\", 21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 0)(38, \"div\", 22)(39, \"button\", 2)(40, \"div\", 3);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(41, \"svg\", 4);\n      i0.ɵɵelement(42, \"path\", 5);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(43, \"div\", 14)(44, \"div\", 23)(45, \"div\", 8)(46, \"div\", 16);\n      i0.ɵɵelement(47, \"input\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"div\", 24)(49, \"div\", 25);\n      i0.ɵɵtext(50, \" + Add task \");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(36);\n      i0.ɵɵproperty(\"ngForOf\", ctx.task_list);\n    }\n  },\n  dependencies: [CdkDropList, NgFor, CdkDrag],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nfunction output() {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"mappings":"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","names":["EventEmitter","CdkDropList","CdkDrag","moveItemInArray","NgFor","i0","ExpandgroupComponent","changetocollapse","collapseeChange","emit","drop","event","task_list","previousIndex","currentIndex","ngOnInit","getTaskList","task_form","fb","group","id","name","parent_task","child_task","create_by","create_date","status","sub","route","paramMap","subscribe","param","get","task","displayTask","getTask","constructor","task_service","data","deleteTask","delete_task","confirm","error","reloadList","reset","patchValue","getOneTask","next","ngOnDestroy","unsubscribe","saveTask","valid","dirty","t","value","createTask","mess","updateTask","onSaveComplete","console","log","selectors","inputs","collapsee","outputs","standalone","features","decls","vars","consts","template","ctx","styles","output","Error"],"sourceRoot":"","sources":["E:\\.NetCoreApp\\MondayApp\\ClientApp\\src\\app\\group\\expandgroup\\expandgroup.component.ts","E:\\.NetCoreApp\\MondayApp\\ClientApp\\src\\app\\group\\expandgroup\\expandgroup.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output, OnDestroy } from '@angular/core';\r\nimport {CdkDragDrop, CdkDropList, CdkDrag, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {NgFor} from '@angular/common';\r\nimport { Task } from 'src/app/task';\r\nimport { TaskService } from 'src/app/task.service';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-expandgroup',\r\n  templateUrl: './expandgroup.component.html',\r\n  styleUrls: ['./expandgroup.component.css'],\r\n  standalone: true,\r\n  imports: [CdkDropList, NgFor, CdkDrag],\r\n})\r\nexport class ExpandgroupComponent implements OnInit, OnDestroy {\r\n  @Input() collapsee: boolean = false;\r\n  @Output() collapseeChange = new EventEmitter<boolean>();\r\n  task_list: Task[] = [];\r\n\r\n  changetocollapse() {\r\n    this.collapseeChange.emit(true);\r\n  }\r\n\r\n  drop(event: CdkDragDrop<string[]>) {\r\n    moveItemInArray(this.task_list, event.previousIndex, event.currentIndex);\r\n  }\r\n\r\n  // ngOnInit(): void {\r\n  //   this.getTaskList();\r\n  // }\r\n\r\n  ngOnInit(): void {\r\n    this.getTaskList();\r\n\r\n\r\n    this.task_form = this.fb.group({\r\n      id: '',\r\n      name: '',\r\n      parent_task: '',\r\n      child_task: [],\r\n      create_by: '',\r\n      create_date: '',\r\n      status: '',\r\n    });\r\n\r\n    this.sub = this.route.paramMap.subscribe(param => {\r\n      const id = param.get('id');\r\n      if(id == '0') {\r\n        const task: Task = {id: \"0\", name: \"\", parent_task: \"\", child_task: [], create_by: \"\", create_date: \"\", status: \"\",};\r\n        this.displayTask(task);\r\n      }\r\n      else {\r\n        this.getTask(id);\r\n      }\r\n    });\r\n}\r\n\r\n  // constructor(private task_service: TaskService) {}\r\n  constructor(private fb: FormBuilder, private route: ActivatedRoute, private task_service: TaskService) {}\r\n\r\n  getTaskList(): void {\r\n    this.task_service.getTaskList().subscribe( data =>{\r\n      this.task_list = data;\r\n    })\r\n  }\r\n\r\n  deleteTask(delete_task: Task): void {\r\n    if(confirm(`Are you sure to delete this task ${delete_task.name}?`)) {\r\n      this.task_service.deleteTask(delete_task.id).subscribe({\r\n        error: () =>this.reloadList()\r\n      })\r\n    }\r\n  }\r\n\r\n  reloadList(): void {\r\n    this.getTaskList();\r\n  }\r\n\r\n  task_form!: FormGroup;\r\n  task!: Task;\r\n  private sub!: Subscription;\r\n  mess: string = \"\";\r\n\r\n  displayTask(task: Task): void {\r\n    if (this.task_form) {\r\n      this.task_form.reset();\r\n    }\r\n\r\n    this.task = task;\r\n\r\n    this.task_form.patchValue({\r\n      id: this.task.id,\r\n      name: this.task.name,\r\n      parent_task: this.task.parent_task,\r\n      child_task: this.task.child_task,\r\n      create_by: this.task.create_by,\r\n      create_date: this.task.create_date,\r\n      status: this.task.status,\r\n    });\r\n  }\r\n\r\n  getTask(id: string | null): void {\r\n    this.task_service.getOneTask(id).subscribe({\r\n      next: (task: Task) => this.displayTask(task)\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n      this.sub.unsubscribe();\r\n  } \r\n\r\n  saveTask(): void {\r\n    if(this.task_form.valid) {\r\n      if(this.task_form.dirty) {\r\n        const t: Task = {...this.task, ...this.task_form.value};\r\n        if(t.id === '0') {\r\n          this.task_service.createTask(t).subscribe({\r\n            error: () => this.mess=\"Thêm mới thành công\"\r\n          });\r\n        }\r\n        else {\r\n          this.task_service.updateTask(t).subscribe({\r\n            error: () => this.mess=\"Chỉnh sửa thành công\"\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        this.onSaveComplete();\r\n      }\r\n    }\r\n    else {\r\n      console.log(\"Task form bị lỗi: dòng 94\");\r\n    }\r\n  }\r\n\r\n  onSaveComplete(): void {\r\n    this.task_form.reset();\r\n    // this.router.navigate(['/task'])\r\n  }\r\n\r\n\r\n}\r\nfunction output() {\r\n  throw new Error('Function not implemented.');\r\n}\r\n","<div class=\"group\">\r\n    <div class=\"mt-2 pl-2 h-14 absolute left-px\">\r\n        <button class=\"p-1 hover:bg-slate-300 rounded-md\">\r\n            <div class=\" group-hover:fill-currentColor\">\r\n                <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"20\" height=\"20\" aria-hidden=\"true\" class=\"icon_4b23d45e02 noFocusStyle_cff5f5a050\" data-testid=\"icon\"><path d=\"M6 10.5C6 11.3284 5.32843 12 4.5 12 3.67157 12 3 11.3284 3 10.5 3 9.67157 3.67157 9 4.5 9 5.32843 9 6 9.67157 6 10.5zM11.8333 10.5C11.8333 11.3284 11.1618 12 10.3333 12 9.50492 12 8.83334 11.3284 8.83334 10.5 8.83334 9.67157 9.50492 9 10.3333 9 11.1618 9 11.8333 9.67157 11.8333 10.5zM17.6667 10.5C17.6667 11.3284 16.9951 12 16.1667 12 15.3383 12 14.6667 11.3284 14.6667 10.5 14.6667 9.67157 15.3383 9 16.1667 9 16.9951 9 17.6667 9.67157 17.6667 10.5z\" fill=\"white\" class=\"group-hover:fill-black\"></path></svg>\r\n            </div>\r\n        </button>\r\n    </div>\r\n    <div>\r\n        <div class=\"flex flex-col p-1 ml-1 pb-0\">\r\n            <div class=\"flex flex-col border-solid py-1\">\r\n                <div class=\"flex items-center\">\r\n                    <button (click)=\"changetocollapse()\">\r\n                        <svg class=\"ml-2 mr-1\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\"><path class=\"fill-blue-500\" d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"/></svg>\r\n                    </button>\r\n                    <span class=\"py-1 ml-2 text-xl text-blue-500 font-medium\">\r\n                        Group Title\r\n                    </span>\r\n                    <span class=\"ml-5 text-black group-hover:visible\">4 Tasks / 1 Subitem</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div>\r\n    <div class=\"flex flex-col p-1 py-0\">\r\n        <div class=\"flex flex-col border-solid py-0 border-l-blue-500 border-gray-200 border-t-2 border-l-8 rounded-tl-md\">\r\n            <div class=\"flex items-center\">\r\n                <div class=\"p-2 border-r-2 border-solid border-gray-200\">\r\n                    <input type=\"checkbox\" class=\"border-gray-200\">\r\n                </div>\r\n                <div class=\"w-1/3 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                    <span>\r\n                        Task\r\n                    </span>\r\n                </div>\r\n                <div class=\"w-40 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                    <span>\r\n                        Person\r\n                    </span>\r\n                </div>\r\n                <div class=\"w-40 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                    <span>\r\n                        Status\r\n                    </span>\r\n                </div>\r\n                <div class=\"w-40 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                    <span>\r\n                        Date\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div cdkDropList (cdkDropListDropped)=\"drop($event)\">\r\n        <div class=\"group\" *ngFor=\"let task of task_list\" cdkDrag>\r\n            <div class=\"pl-2 h-14 absolute left-px\">\r\n                <button class=\"p-1 hover:bg-slate-300 rounded-md\" (click)=\"deleteTask(task)\" >\r\n                    <div class=\" group-hover:fill-currentColor\">\r\n                        <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"20\" height=\"20\" aria-hidden=\"true\" class=\"icon_4b23d45e02 noFocusStyle_cff5f5a050\" data-testid=\"icon\"><path d=\"M6 10.5C6 11.3284 5.32843 12 4.5 12 3.67157 12 3 11.3284 3 10.5 3 9.67157 3.67157 9 4.5 9 5.32843 9 6 9.67157 6 10.5zM11.8333 10.5C11.8333 11.3284 11.1618 12 10.3333 12 9.50492 12 8.83334 11.3284 8.83334 10.5 8.83334 9.67157 9.50492 9 10.3333 9 11.1618 9 11.8333 9.67157 11.8333 10.5zM17.6667 10.5C17.6667 11.3284 16.9951 12 16.1667 12 15.3383 12 14.6667 11.3284 14.6667 10.5 14.6667 9.67157 15.3383 9 16.1667 9 16.9951 9 17.6667 9.67157 17.6667 10.5z\" fill=\"white\" class=\"group-hover:fill-black\"></path></svg>\r\n                    </div>\r\n                </button>\r\n            </div>\r\n            <div class=\"flex flex-col p-1 py-0\">\r\n                <div class=\"flex flex-col border-solid border-l-blue-500 border-gray-200 border-t-2 border-l-8\">\r\n                    <div class=\"flex items-center\">\r\n                        <div class=\"p-2 border-r-2 border-solid border-gray-200\">\r\n                            <input type=\"checkbox\" class=\"border-gray-200\">\r\n                        </div>\r\n                        <div class=\"w-1/3 flex pl-8 py-2 border-r-2 border-solid border-gray-200\">\r\n                            <span>\r\n                                {{task.name}}\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"w-40 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                            <span>\r\n                                {{task.create_by}}\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"w-40 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                            <span>\r\n                                {{task.status}}\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"w-40 flex justify-center p-2 border-r-2 border-solid border-gray-200\">\r\n                            <span>\r\n                                {{task.create_date}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"group\">\r\n        <div class=\"pl-2 h-14 absolute left-px\">\r\n            <button class=\"p-1 hover:bg-slate-300 rounded-md\">\r\n                <div class=\" group-hover:fill-currentColor\">\r\n                    <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"20\" height=\"20\" aria-hidden=\"true\" class=\"icon_4b23d45e02 noFocusStyle_cff5f5a050\" data-testid=\"icon\"><path d=\"M6 10.5C6 11.3284 5.32843 12 4.5 12 3.67157 12 3 11.3284 3 10.5 3 9.67157 3.67157 9 4.5 9 5.32843 9 6 9.67157 6 10.5zM11.8333 10.5C11.8333 11.3284 11.1618 12 10.3333 12 9.50492 12 8.83334 11.3284 8.83334 10.5 8.83334 9.67157 9.50492 9 10.3333 9 11.1618 9 11.8333 9.67157 11.8333 10.5zM17.6667 10.5C17.6667 11.3284 16.9951 12 16.1667 12 15.3383 12 14.6667 11.3284 14.6667 10.5 14.6667 9.67157 15.3383 9 16.1667 9 16.9951 9 17.6667 9.67157 17.6667 10.5z\" fill=\"white\" class=\"group-hover:fill-black\"></path></svg>\r\n                </div>\r\n            </button>\r\n        </div>\r\n        <div class=\"flex flex-col p-1 py-0\">\r\n            <div class=\"flex flex-col border-solid border-l-blue-200 group-hover:border-l-blue-500 border-gray-200 border-2 border-l-8 rounded-bl-md\">\r\n                <div class=\"flex items-center\">\r\n                    <div class=\"p-2 border-r-2 border-solid border-gray-200\">\r\n                        <input type=\"checkbox\" class=\"border-gray-200\">\r\n                    </div>\r\n                    <div class=\"w-1/3 flex pl-8 py-2  border-r-2 border-solid border-gray-200\">\r\n                        <div class=\"border-solid border-2 border-white group-hover:border-gray-300\">\r\n                            + Add task\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}