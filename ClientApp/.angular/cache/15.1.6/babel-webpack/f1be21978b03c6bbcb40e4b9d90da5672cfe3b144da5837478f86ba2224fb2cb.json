{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { CdkDropList, CdkDrag, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { NgFor } from '@angular/common';\nlet ExpandgroupComponent = class ExpandgroupComponent {\n  changetocollapse() {\n    this.collapseeChange.emit(true);\n  }\n  drop(event) {\n    moveItemInArray(this.task_list, event.previousIndex, event.currentIndex);\n  }\n  ngOnInit() {\n    this.getTaskList();\n  }\n  // constructor(private task_service: TaskService) {}\n  constructor(fb, route, task_service) {\n    this.fb = fb;\n    this.route = route;\n    this.task_service = task_service;\n    this.collapsee = false;\n    this.collapseeChange = new EventEmitter();\n    this.task_list = [];\n    this.mess = \"\";\n  }\n  getTaskList() {\n    this.task_service.getTaskList().subscribe(data => {\n      this.task_list = data;\n    });\n  }\n  deleteTask(delete_task) {\n    if (confirm(`Are you sure to delete this task ${delete_task.name}?`)) {\n      this.task_service.deleteTask(delete_task.id).subscribe({\n        error: () => this.reloadList()\n      });\n    }\n  }\n  reloadList() {\n    this.getTaskList();\n  }\n  displayTask(task) {\n    if (this.task_form) {\n      this.task_form.reset();\n    }\n    this.task = task;\n    this.task_form.patchValue({\n      id: this.task.id,\n      name: this.task.name,\n      parent_task: this.task.parent_task,\n      child_task: this.task.child_task,\n      create_by: this.task.create_by,\n      create_date: this.task.create_date,\n      status: this.task.status\n    });\n  }\n  getTask(id) {\n    this.task_service.getOneTask(id).subscribe({\n      next: task => this.displayTask(task)\n    });\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  saveTask() {\n    if (this.task_form.valid) {\n      if (this.task_form.dirty) {\n        const t = {\n          ...this.task,\n          ...this.task_form.value\n        };\n        if (t.id === '0') {\n          this.task_service.createTask(t).subscribe({\n            error: () => this.mess = \"Thêm mới thành công\"\n          });\n        } else {\n          this.task_service.updateTask(t).subscribe({\n            error: () => this.mess = \"Chỉnh sửa thành công\"\n          });\n        }\n      } else {\n        this.onSaveComplete();\n      }\n    } else {\n      console.log(\"Task form bị lỗi: dòng 94\");\n    }\n  }\n  onSaveComplete() {\n    this.task_form.reset();\n    // this.router.navigate(['/task'])\n  }\n};\n\n__decorate([Input()], ExpandgroupComponent.prototype, \"collapsee\", void 0);\n__decorate([Output()], ExpandgroupComponent.prototype, \"collapseeChange\", void 0);\nExpandgroupComponent = __decorate([Component({\n  selector: 'app-expandgroup',\n  templateUrl: './expandgroup.component.html',\n  styleUrls: ['./expandgroup.component.css'],\n  standalone: true,\n  imports: [CdkDropList, NgFor, CdkDrag]\n})], ExpandgroupComponent);\nexport { ExpandgroupComponent };\nfunction output() {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"mappings":"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","names":["Component","EventEmitter","Input","Output","CdkDropList","CdkDrag","moveItemInArray","NgFor","ExpandgroupComponent","changetocollapse","collapseeChange","emit","drop","event","task_list","previousIndex","currentIndex","ngOnInit","getTaskList","constructor","fb","route","task_service","subscribe","data","deleteTask","delete_task","confirm","name","id","error","reloadList","displayTask","task","task_form","reset","patchValue","parent_task","child_task","create_by","create_date","status","getTask","getOneTask","next","ngOnDestroy","sub","unsubscribe","saveTask","valid","dirty","t","value","createTask","mess","updateTask","onSaveComplete","console","log","__decorate","selector","templateUrl","styleUrls","standalone","imports","output","Error"],"sourceRoot":"","sources":["E:\\.NetCoreApp\\MondayApp\\ClientApp\\src\\app\\group\\expandgroup\\expandgroup.component.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport {CdkDragDrop, CdkDropList, CdkDrag, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {NgFor} from '@angular/common';\r\nimport { Task } from 'src/app/task';\r\nimport { TaskService } from 'src/app/task.service';\r\n\r\n@Component({\r\n  selector: 'app-expandgroup',\r\n  templateUrl: './expandgroup.component.html',\r\n  styleUrls: ['./expandgroup.component.css'],\r\n  standalone: true,\r\n  imports: [CdkDropList, NgFor, CdkDrag],\r\n})\r\nexport class ExpandgroupComponent implements OnInit {\r\n  @Input() collapsee: boolean = false;\r\n  @Output() collapseeChange = new EventEmitter<boolean>();\r\n  task_list: Task[] = [];\r\n\r\n  changetocollapse() {\r\n    this.collapseeChange.emit(true);\r\n  }\r\n\r\n  drop(event: CdkDragDrop<string[]>) {\r\n    moveItemInArray(this.task_list, event.previousIndex, event.currentIndex);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getTaskList();\r\n  }\r\n\r\n  // constructor(private task_service: TaskService) {}\r\n  constructor(private fb: FormBuilder, private route: ActivatedRoute, private task_service: TaskService) {}\r\n\r\n  getTaskList(): void {\r\n    this.task_service.getTaskList().subscribe( data =>{\r\n      this.task_list = data;\r\n    })\r\n  }\r\n\r\n  deleteTask(delete_task: Task): void {\r\n    if(confirm(`Are you sure to delete this task ${delete_task.name}?`)) {\r\n      this.task_service.deleteTask(delete_task.id).subscribe({\r\n        error: () =>this.reloadList()\r\n      })\r\n    }\r\n  }\r\n\r\n  reloadList(): void {\r\n    this.getTaskList();\r\n  }\r\n\r\n  \r\n\r\n  task_form!: FormGroup;\r\n  task!: Task;\r\n  private sub!: Subscription;\r\n  mess: string = \"\";\r\n\r\n\r\n\r\n\r\n\r\n  displayTask(task: Task): void {\r\n    if (this.task_form) {\r\n      this.task_form.reset();\r\n    }\r\n\r\n    this.task = task;\r\n\r\n    this.task_form.patchValue({\r\n      id: this.task.id,\r\n      name: this.task.name,\r\n      parent_task: this.task.parent_task,\r\n      child_task: this.task.child_task,\r\n      create_by: this.task.create_by,\r\n      create_date: this.task.create_date,\r\n      status: this.task.status,\r\n    });\r\n  }\r\n\r\n  getTask(id: string | null): void {\r\n    this.task_service.getOneTask(id).subscribe({\r\n      next: (task: Task) => this.displayTask(task)\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n      this.sub.unsubscribe();\r\n  } \r\n\r\n  saveTask(): void {\r\n    if(this.task_form.valid) {\r\n      if(this.task_form.dirty) {\r\n        const t: Task = {...this.task, ...this.task_form.value};\r\n        if(t.id === '0') {\r\n          this.task_service.createTask(t).subscribe({\r\n            error: () => this.mess=\"Thêm mới thành công\"\r\n          });\r\n        }\r\n        else {\r\n          this.task_service.updateTask(t).subscribe({\r\n            error: () => this.mess=\"Chỉnh sửa thành công\"\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        this.onSaveComplete();\r\n      }\r\n    }\r\n    else {\r\n      console.log(\"Task form bị lỗi: dòng 94\");\r\n    }\r\n  }\r\n\r\n  onSaveComplete(): void {\r\n    this.task_form.reset();\r\n    // this.router.navigate(['/task'])\r\n  }\r\n\r\n\r\n}\r\nfunction output() {\r\n  throw new Error('Function not implemented.');\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}